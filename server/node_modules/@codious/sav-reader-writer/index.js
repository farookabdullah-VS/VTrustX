// REQUIRES
const reader = require('./reader');
const { buffer } = require('./utilities');
const { records, VariableAlignment, VariableMeasure, variables, VariableType } = require('./writer');


// PUBLIC PROPERTIES
module.exports.VariableAlignment = VariableAlignment;
module.exports.VariableMeasure = VariableMeasure;
module.exports.VariableType = VariableType;


// PUBLIC METHODS
module.exports.toBuffer = function(recs, vars, options = { bias: 100 }) {
  return buffer.write([
    variables.toArray(vars, recs.length, options),
    records.toArray(recs, vars, options),
  ].flat());
};

module.exports.toJSON = function(buf) {
  return reader(buf);
};